# 저전력 블루투스 (BLE)

목차

[1. 구성](#구성)

[2. 네트워크 토폴로지](#네트워크-토폴로지)



### 구성

#### 표준 규격 기반 지원

- BR/EDR (기존 블루투스)

- BLE (저전력 블루투스)

- 단일 모드 디바이스 (BLE, 블루투스 스마트)

  BLE를 구현한 디바이스로써 단일 모드와 듀얼 모드 디바이스들과 통신할 수 있지만 BR/EDR만 지원하는 디바이스는 불가능

- 듀얼 모드 디바이스 (BR/EDR/LE, 블루투스 스마트 레디)

  BR/EDR 과 BLE를 모두 구현한 디바이스로 어떤 블루투스 디바이스와도 통신 가능

#### 칩 카운트 기반

모든 블루투스 장치의 주요 구성요소 세 가지

1. 애플리케이션

   특정하 쓰임새를 다루는 블루투스 프로토콜 스택과 연계하는 사용자 애플리케이션

2. 호스트

   블루투스 프로토콜 스택의 상위 계층

3. 컨트롤러

   무선을 포함한 블루투스 프로토콜 스택의 하위 계층

또한 표쥰 규격은 다른 회사에서 제조된 호스트와 컨트롤러의 상호운용성을 허용하기 위해 호스트와 컨트롤러 사이에 표준 통신 프로토콜 (HCI, 호스트 컨트롤러 인터페이스)을 제공한다.



가장 일반적인 세 가지 구성

1. SoC (시스템 온 칩)

   애플리케이션, 호스트, 컨트롤러를 실행하는 단일 IC

2. HCI를 통한 듀얼 IC

   하나의 IC가 애플리케이션과 호스트를 실행시키고 HCI를 사용하여 컨트롤러를 실행시키는 두 번째 IC와 통신

3. 여결 장치와 듀얼 IC

   하나의 IC가 애플리케이셔을 실행하고 호스트와 컨트롤러에서 모두 실행되느 두 번째 IC와 독점적인 프로토콜을 사용하여 통신

> 단일 직접 회로 = IC



### 네트워크 토폴로지

저전력 블루투스 디바이스는 **방송** 또는 **연결** 이라는 두 가지 방식으로 외부와 통신할 수 있음



#### 방송

방송은 디바이스가 하나 이상의 피어로 데이터를 전송하는 유일한 방법이다. 또한, 빠르고 사용하기 쉽다. 정해진 시간이나 다중 디바이스들에 소량의 데이터만 밀어 넣고 싶을 때 좋은 선택이 된다.

방송은 두 가지 별도의 역할을 정의한다

1. 브로드캐스터

   비접속 게시 (Advertising) 패킷을 받고 싶어하는 자에게 정기적으로 전송

2. 옵저버

   현재 방송 중인 비접속 게시 패킷을 수신하기 위해 미리 설정된 주파수를 반복적으로 검색



#### 연결

양방향으로 데이터를 전송하는 경우나 수용 가능한 게시 페이로드보다 더 많은 데이터가 있는 경우, 연결을 사용해야 한다.

연결은 두 디바이스 사이의 패킷들의 영구적, 주기적 데이터 교환을 말한다.

그러므로 데이터가 연결에 관련된 두 피어 사이에서만 송신과 수신이 된다. 즉 비공개이다.



연결은 다음 두 개의 역할을 포함한다.

1. 중앙 장치 (마스터)

   반복적으로 접속 가능한 게시 패킷에 대한 프리셋 주파수를 스캔하고 적절할 때 연결을 초기화

   연결이 설정되면 중앙 장치 (마스터)는 타이밍을 관리하고 주기적인 데이터 교환을 개시

2. 주변 장치 (슬레이브)

   정기적으로 접속 가능한 게시 패킷을 보내고 들어오는 연결을 수용하는 장치

   한번 활성화된 연결에서 주변 장치느 중앙 장치의 정기적인 타이밍과 함께 정기적인 교환 데이터를 따름

   

연결을 시작하기 위해  중앙 장치는 접속 가능한 게시 패킷을 주변 장치로부터 선택하고 두 장치 사이에 전용 연결을 설정하는 요청을 주변 장치로 전송.

연결이 설정되고 나면 주변 장치는 게시를 멈추고 양방향으로 데이터의 교환을 할 수 있음







